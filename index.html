<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ai Forge</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }
        button {
            padding: 15px 30px;
            font-size: 18px;
            background: #00f0a0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Ai Forge</h1>
    <p>Build Ethical AI Apps on Pi Network</p>
    
    <button onclick="connectPiWallet()">Connect Pi Wallet</button>
    
    <div id="status"></div>

    <script>
        Pi.init({ 
            version: "2.0", 
            sandbox: false
        });

        function connectPiWallet() {
            Pi.authenticate(['payments', 'username'], function(auth) {
                document.getElementById('status').innerHTML = `
                    <div style="color: green; margin: 20px;">
                        âœ… Wallet Connected! Ready to test deployment transaction.
                    </div>
                    <button onclick="testDeploymentPayment()" style="padding: 15px; background: #00f0a0; color: black; border: none; border-radius: 10px; font-size: 18px;">
                        ðŸš€ COMPLETE DEPLOYMENT (Test Payment)
                    </button>
                `;
            }).catch(function(error) {
                console.error("Wallet connection failed:", error);
                alert("Wallet connection failed. Please make sure you're in Pi Browser.");
            });
        }

        function testDeploymentPayment() {
            Pi.createPayment({
                amount: 0.01,
                memo: "PiForge Deployment Verification",
                metadata: { 
                    test: true,
                    deployment: "final_step"
                }
            }, {
                onReadyForServerApproval: function(paymentId) {
                    console.log("Payment ready for approval:", paymentId);
                    document.getElementById('status').innerHTML += `
                        <div style="color: orange; margin: 10px;">
                            âš¡ Payment initiated! Check your Pi Wallet to approve...
                        </div>
                    `;
                },
                onReadyForServerCompletion: function(paymentId, txid) {
                    console.log("Payment completed!", paymentId, txid);
                    document.getElementById('status').innerHTML += `
                        <div style="color: green; margin: 10px; font-weight: bold;">
                            âœ… DEPLOYMENT COMPLETE! Your app is now live!
                        </div>
                    `;
                },
                onCancel: function(paymentId) {
                    console.log("Payment cancelled:", paymentId);
                    alert("Payment cancelled. Please try again to complete deployment.");
                },
                onError: function(error, payment) {
                    console.error("Payment error:", error);
                    alert("Payment error: " + error.message);
                }
            });
        }
    </script>
</body>
</html>
